(function(k,s){typeof exports=="object"&&typeof module<"u"?s(exports,require("solid-js"),require("@codemirror/view"),require("@codemirror/autocomplete"),require("@codemirror/state"),require("@replit/codemirror-vim"),require("@codemirror/language"),require("@codemirror/commands"),require("@codemirror/lang-markdown"),require("@codemirror/language-data"),require("@lezer/highlight")):typeof define=="function"&&define.amd?define(["exports","solid-js","@codemirror/view","@codemirror/autocomplete","@codemirror/state","@replit/codemirror-vim","@codemirror/language","@codemirror/commands","@codemirror/lang-markdown","@codemirror/language-data","@lezer/highlight"],s):(k=typeof globalThis<"u"?globalThis:k||self,s(k.Ink={},k.solidJs,k.view,k.autocomplete,k.state,k.codemirrorVim,k.language,k.commands,k.langMarkdown,k.languageData,k.highlight))})(this,function(k,s,u,K,b,Se,N,T,Z,Le,f){"use strict";function Me(e,n,t){let o=t.length,r=n.length,a=o,l=0,i=0,c=n[r-1].nextSibling,d=null;for(;l<r||i<a;){if(n[l]===t[i]){l++,i++;continue}for(;n[r-1]===t[a-1];)r--,a--;if(r===l){const p=a<o?i?t[i-1].nextSibling:t[a-i]:c;for(;i<a;)e.insertBefore(t[i++],p)}else if(a===i)for(;l<r;)(!d||!d.has(n[l]))&&n[l].remove(),l++;else if(n[l]===t[a-1]&&t[i]===n[r-1]){const p=n[--r].nextSibling;e.insertBefore(t[i++],n[l++].nextSibling),e.insertBefore(t[--a],p),n[r]=t[a]}else{if(!d){d=new Map;let y=i;for(;y<a;)d.set(t[y],y++)}const p=d.get(n[l]);if(p!=null)if(i<p&&p<a){let y=l,L=1,H;for(;++y<r&&y<a&&!((H=d.get(n[y]))==null||H!==p+L);)L++;if(L>p-i){const F=n[l];for(;i<p;)e.insertBefore(t[i++],F)}else e.replaceChild(t[i++],n[l++])}else l++;else n[l++].remove()}}}const Y="_$DX_DELEGATE";function $e(e,n,t){let o;return s.createRoot(r=>{o=r,n===document?e():m(n,e(),n.firstChild?null:void 0,t)}),()=>{o(),n.textContent=""}}function x(e,n,t){const o=document.createElement("template");o.innerHTML=e;let r=o.content.firstChild;return t&&(r=r.firstChild),r}function J(e,n=window.document){const t=n[Y]||(n[Y]=new Set);for(let o=0,r=e.length;o<r;o++){const a=e[o];t.has(a)||(t.add(a),n.addEventListener(a,Ee))}}function ee(e,n,t){t==null?e.removeAttribute(n):e.setAttribute(n,t)}function m(e,n,t,o){if(t!==void 0&&!o&&(o=[]),typeof n!="function")return O(e,n,o,t);s.createRenderEffect(r=>O(e,n(),r,t),o)}function Ee(e){const n=`$$${e.type}`;let t=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==t&&Object.defineProperty(e,"target",{configurable:!0,value:t}),Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return t||document}}),s.sharedConfig.registry&&!s.sharedConfig.done&&(s.sharedConfig.done=!0,document.querySelectorAll("[id^=pl-]").forEach(o=>o.remove()));t!==null;){const o=t[n];if(o&&!t.disabled){const r=t[`${n}Data`];if(r!==void 0?o.call(t,r,e):o.call(t,e),e.cancelBubble)return}t=t.host&&t.host!==t&&t.host instanceof Node?t.host:t.parentNode}}function O(e,n,t,o,r){for(s.sharedConfig.context&&!t&&(t=[...e.childNodes]);typeof t=="function";)t=t();if(n===t)return t;const a=typeof n,l=o!==void 0;if(e=l&&t[0]&&t[0].parentNode||e,a==="string"||a==="number"){if(s.sharedConfig.context)return t;if(a==="number"&&(n=n.toString()),l){let i=t[0];i&&i.nodeType===3?i.data=n:i=document.createTextNode(n),t=_(e,t,o,i)}else t!==""&&typeof t=="string"?t=e.firstChild.data=n:t=e.textContent=n}else if(n==null||a==="boolean"){if(s.sharedConfig.context)return t;t=_(e,t,o)}else{if(a==="function")return s.createRenderEffect(()=>{let i=n();for(;typeof i=="function";)i=i();t=O(e,i,t,o)}),()=>t;if(Array.isArray(n)){const i=[],c=t&&Array.isArray(t);if(q(i,n,t,r))return s.createRenderEffect(()=>t=O(e,i,t,o,!0)),()=>t;if(s.sharedConfig.context){for(let d=0;d<i.length;d++)if(i[d].parentNode)return t=i}if(i.length===0){if(t=_(e,t,o),l)return t}else c?t.length===0?te(e,i,o):Me(e,t,i):(t&&_(e),te(e,i));t=i}else if(n instanceof Node){if(s.sharedConfig.context&&n.parentNode)return t=l?[n]:n;if(Array.isArray(t)){if(l)return t=_(e,t,o,n);_(e,t,null,n)}else t==null||t===""||!e.firstChild?e.appendChild(n):e.replaceChild(n,e.firstChild);t=n}}return t}function q(e,n,t,o){let r=!1;for(let a=0,l=n.length;a<l;a++){let i=n[a],c=t&&t[a];if(i instanceof Node)e.push(i);else if(!(i==null||i===!0||i===!1))if(Array.isArray(i))r=q(e,i,c)||r;else if(typeof i=="function")if(o){for(;typeof i=="function";)i=i();r=q(e,Array.isArray(i)?i:[i],c)||r}else e.push(i),r=!0;else{const d=String(i);c&&c.nodeType===3&&c.data===d?e.push(c):e.push(document.createTextNode(d))}}return r}function te(e,n,t){for(let o=0,r=n.length;o<r;o++)e.insertBefore(n[o],t)}function _(e,n,t,o){if(t===void 0)return e.textContent="";const r=o||document.createTextNode("");if(n.length){let a=!1;for(let l=n.length-1;l>=0;l--){const i=n[l];if(r!==i){const c=i.parentNode===e;!a&&!l?c?e.replaceChild(r,i):e.insertBefore(r,t):c&&i.remove()}else a=!0}}else e.insertBefore(r,t);return[r]}const M={array:"[object Array]",object:"[object Object]",string:"[object String]",undefined:"[object Undefined]",window:"[object Window]"},_e=e=>{if(Object.prototype.toString.call(e)===M.object)return`[object ${e.constructor.name}]`},A=(e,n)=>_e(e)===n,Ae=(e,n)=>{const t=new WeakMap,o=(r,a)=>t.get(r)||(A(r,M.object)&&t.set(r,!0),A(a,M.undefined))?r:A(r,M.array)&&A(a,M.array)?[...a]:A(r,M.object)&&A(a,M.object)?Object.keys(r).reduce((l,i)=>(Object.hasOwn(a,i)?l[i]=o(r[i],a[i]):l[i]=r[i],l),{}):a;return o(e,n)},V=(e,n)=>Ae(e,n);var $=(e=>(e.Auto="auto",e.Dark="dark",e.Light="light",e))($||{}),S=(e=>(e.Appearance="appearance",e.Attribution="attribution",e.Autocomplete="autocomplete",e.Images="images",e.ReadOnly="readonly",e.Spellcheck="spellcheck",e.Vim="vim",e))(S||{}),g=(e=>(e.Bold="bold",e.Code="code",e.CodeBlock="code_block",e.Heading="heading",e.Image="image",e.Italic="italic",e.Link="link",e.List="list",e.OrderedList="ordered_list",e.Quote="quote",e.TaskList="task_list",e))(g||{}),j=(e=>(e.Completion="completion",e.Default="default",e.Grammar="grammar",e))(j||{});const ne=()=>document.createElement("div"),oe=()=>window.matchMedia("(prefers-color-scheme: dark)").matches,De=e=>e===$.Dark?!0:e===$.Light?!1:oe(),P=e=>{const n=[{suffix:"border-radius",default:"0.25rem"},{suffix:"color",default:"currentColor"},{suffix:"flex-direction",default:"column"},{suffix:"font-family",default:"inherit"},{suffix:"block-background-color",default:"#121212",light:"#f5f5f5"},{suffix:"block-background-color-on-hover",default:"#0f0f0f",light:"#e0e0e0"},{suffix:"block-max-height",default:"20rem"},{suffix:"block-padding",default:"0.5rem"},{suffix:"code-background-color",default:"var(--ink-internal-block-background-color)"},{suffix:"code-color",default:"inherit"},{suffix:"code-font-family",default:"'Monaco', Courier, monospace"},{suffix:"editor-font-size",default:"1em"},{suffix:"editor-line-height",default:"2em"},{suffix:"editor-padding",default:"0.5rem"},{suffix:"inline-padding",default:"0.125rem"},{suffix:"modal-position",default:"fixed"},{suffix:"syntax-atom-color",default:"#d19a66"},{suffix:"syntax-comment-color",default:"#abb2bf"},{suffix:"syntax-comment-font-style",default:"italic"},{suffix:"syntax-emphasis-color",default:"inherit"},{suffix:"syntax-emphasis-font-style",default:"italic"},{suffix:"syntax-hashtag-background-color",default:"#222",light:"#eee"},{suffix:"syntax-hashtag-color",default:"inherit"},{suffix:"syntax-heading-color",default:"inherit"},{suffix:"syntax-heading-font-weight",default:"600"},{suffix:"syntax-heading1-color",default:"var(--ink-internal-syntax-heading-color, inherit)"},{suffix:"syntax-heading1-font-size",default:"1.6em"},{suffix:"syntax-heading1-font-weight",default:"600"},{suffix:"syntax-heading2-color",default:"var(--ink-internal-syntax-heading-color, inherit)"},{suffix:"syntax-heading2-font-size",default:"1.5em"},{suffix:"syntax-heading2-font-weight",default:"600"},{suffix:"syntax-heading3-color",default:"var(--ink-internal-syntax-heading-color, inherit)"},{suffix:"syntax-heading3-font-size",default:"1.4em"},{suffix:"syntax-heading3-font-weight",default:"600"},{suffix:"syntax-heading4-color",default:"var(--ink-internal-syntax-heading-color, inherit)"},{suffix:"syntax-heading4-font-size",default:"1.3em"},{suffix:"syntax-heading4-font-weight",default:"600"},{suffix:"syntax-heading5-color",default:"var(--ink-internal-syntax-heading-color, inherit)"},{suffix:"syntax-heading5-font-size",default:"1.2em"},{suffix:"syntax-heading5-font-weight",default:"600"},{suffix:"syntax-heading6-color",default:"var(--ink-internal-syntax-heading-color, inherit)"},{suffix:"syntax-heading6-font-size",default:"1.1em"},{suffix:"syntax-heading6-font-weight",default:"600"},{suffix:"syntax-highlight-background-color",default:"#555555"},{suffix:"syntax-keyword-color",default:"#c678dd"},{suffix:"syntax-link-color",default:"inherit"},{suffix:"syntax-meta-color",default:"#abb2bf"},{suffix:"syntax-monospace-color",default:"var(--ink-internal-code-color)"},{suffix:"syntax-monospace-font-family",default:"var(--ink-internal-code-font-family)"},{suffix:"syntax-name-color",default:"#d19a66"},{suffix:"syntax-name-label-color",default:"#abb2bf"},{suffix:"syntax-name-property-color",default:"#96c0d8"},{suffix:"syntax-name-property-definition-color",default:"#e06c75"},{suffix:"syntax-name-variable-color",default:"#e06c75"},{suffix:"syntax-name-variable-definition-color",default:"#e5c07b"},{suffix:"syntax-name-variable-local-color",default:"#d19a66"},{suffix:"syntax-name-variable-special-color",default:"inherit"},{suffix:"syntax-number-color",default:"#d19a66"},{suffix:"syntax-operator-color",default:"#96c0d8"},{suffix:"syntax-processing-instruction-color",default:"#444444",light:"#bbbbbb"},{suffix:"syntax-punctuation-color",default:"#abb2bf"},{suffix:"syntax-strikethrough-color",default:"inherit"},{suffix:"syntax-strikethrough-text-decoration",default:"line-through"},{suffix:"syntax-string-color",default:"#98c379"},{suffix:"syntax-string-special-color",default:"inherit"},{suffix:"syntax-strong-color",default:"inherit"},{suffix:"syntax-strong-font-weight",default:"600"},{suffix:"syntax-url-color",default:"#aaaaaa",light:"#666666"}],t=!De(e.options.interface.appearance);return n.map(o=>{const r=t&&o.light?o.light:o.default;return`--ink-internal-${o.suffix}: var(--ink-${o.suffix}, ${r});`})},re=()=>[u.EditorView.theme({},{dark:!0})],ie=()=>[u.EditorView.theme({},{dark:!1})];class Be extends u.WidgetType{constructor(){super()}eq(){return!0}toDOM(){const n=document.createElement("div"),t=n.appendChild(document.createElement("span")),o=n.appendChild(document.createElement("a"));return n.setAttribute("aria-hidden","true"),n.style.bottom="0",n.style.fontSize="0.75em",n.style.opacity="0.5",n.style.position="absolute",n.style.right="0",t.innerText="powered by ",o.href="https://github.com/voracious/ink-mde",o.innerText="ink-mde",o.rel="noopener noreferrer",o.target="_blank",o.style.color="var(--ink-internal-color)",o.style.fontWeight="600",o.style.textDecoration="none",n}}const Ne=u.EditorView.baseTheme({".cm-content":{paddingBottom:"2em"}}),Te=b.StateField.define({create(e){return b.RangeSet.of(ae().range(e.doc.length))},update(e,n){return b.RangeSet.of(ae().range(n.newDoc.length))},provide(e){return u.EditorView.decorations.from(e)}}),ae=()=>u.Decoration.widget({widget:new Be,side:1,block:!0}),Ve=()=>[Ne,Te];class je extends u.WidgetType{url;constructor({url:n}){super(),this.url=n}eq(n){return n.url===this.url}toDOM(){const n=document.createElement("div"),t=n.appendChild(document.createElement("div")),o=t.appendChild(document.createElement("figure")),r=o.appendChild(document.createElement("img"));return n.setAttribute("aria-hidden","true"),n.className="cm-image-container",t.className="cm-image-backdrop",o.className="cm-image-figure",r.className="cm-image-img",r.src=this.url,n.style.paddingBottom="0.5rem",n.style.paddingTop="0.5rem",t.classList.add("cm-image-backdrop"),t.style.borderRadius="var(--ink-internal-border-radius)",t.style.display="flex",t.style.alignItems="center",t.style.justifyContent="center",t.style.overflow="hidden",t.style.maxWidth="100%",o.style.margin="0",r.style.display="block",r.style.maxHeight="var(--ink-internal-block-max-height)",r.style.maxWidth="100%",r.style.width="100%",n}}const ze=()=>{const e=/!\[.*?\]\((?<url>.*?)\)/,n=a=>u.Decoration.widget({widget:new je(a),side:-1,block:!0}),t=a=>{const l=[];return N.syntaxTree(a).iterate({enter:({type:i,from:c,to:d})=>{if(i.name==="Image"){const p=e.exec(a.doc.sliceString(c,d));p&&p.groups&&p.groups.url&&l.push(n({url:p.groups.url}).range(a.doc.lineAt(c).from))}}}),l.length>0?b.RangeSet.of(l):u.Decoration.none},o=u.EditorView.baseTheme({".cm-image-backdrop":{backgroundColor:"var(--ink-internal-block-background-color)"}}),r=b.StateField.define({create(a){return t(a)},update(a,l){return l.docChanged?t(l.state):a.map(l.changes)},provide(a){return u.EditorView.decorations.from(a)}});return[o,r]},He=()=>u.EditorView.contentAttributes.of({spellcheck:"true"}),Re=(e,n)=>{const t=e.resolver(n);return e.compartment.of(t)},Oe=e=>e.extensions.map(n=>Re(n,e.options)),Ie=(e,n)=>{const t=e.resolver(n);return e.compartment.reconfigure(t)},le=e=>e.extensions.map(n=>Ie(n,e.options)),E=e=>{const n=new b.Compartment,t=Fe[e];return{compartment:n,name:e,resolver:t}},We=()=>[E(S.Appearance),E(S.Attribution),E(S.Autocomplete),E(S.Images),E(S.ReadOnly),E(S.Spellcheck),E(S.Vim)],Fe={appearance({interface:{appearance:e}}){return e===$.Dark?re():e===$.Light?ie():oe()?re():ie()},attribution(e){return e.interface.attribution?Ve():[]},autocomplete(e){return e.interface.autocomplete?K.closeBrackets():[]},images(e){return e.interface.images?ze():[]},readonly(e){return e.interface.readonly?b.EditorState.readOnly.of(!0):b.EditorState.readOnly.of(!1)},spellcheck(e){return e.interface.spellcheck?He():[]},vim(e){return e.vim?Se.vim():[]}},se=()=>({editor:new u.EditorView,extensions:We(),options:{doc:"",files:{clipboard:!1,dragAndDrop:!1,handler:()=>{},injectMarkup:!0,types:["image/*"]},hooks:{afterUpdate:()=>{},beforeUpdate:()=>{}},interface:{appearance:$.Auto,attribution:!0,autocomplete:!1,images:!1,readonly:!1,spellcheck:!0,toolbar:!1},plugins:[],selections:[],toolbar:{bold:!0,code:!0,codeBlock:!0,heading:!0,image:!0,italic:!0,link:!0,list:!0,orderedList:!0,quote:!0,taskList:!0,upload:!1},vim:!1},root:ne(),target:ne()}),qe=e=>V(se(),e),Pe=e=>{const[n,t]=s.createSignal(qe({options:e}));return[n,t]},ce=e=>{const n=e.map(t=>b.SelectionRange.fromJSON({anchor:t.start,head:t.end}));return b.EditorSelection.create(n)},Ue=e=>e.ranges.map(t=>({end:t.anchor<t.head?t.head:t.anchor,start:t.head<t.anchor?t.head:t.anchor})),w=e=>({...{block:!1,line:!1,multiline:!1,nodes:[],prefix:"",prefixStates:[],suffix:""},...e}),Xe={[g.Bold]:w({nodes:["StrongEmphasis"],prefix:"**",suffix:"**"}),[g.Code]:w({nodes:["InlineCode"],prefix:"`",suffix:"`"}),[g.CodeBlock]:w({block:!0,nodes:["FencedCode"],prefix:"```\n",suffix:"\n```"}),[g.Heading]:w({multiline:!0,nodes:["ATXHeading1","ATXHeading2","ATXHeading3","ATXHeading4","ATXHeading5","ATXHeading6"],prefix:"# ",prefixStates:["# ","## ","### ","#### ","##### ","###### ",""]}),[g.Image]:w({nodes:["Image"],prefix:"![](",suffix:")"}),[g.Italic]:w({nodes:["Emphasis"],prefix:"*",suffix:"*"}),[g.Link]:w({nodes:["Link"],prefix:"[](",suffix:")"}),[g.OrderedList]:w({line:!0,multiline:!0,nodes:["OrderedList"],prefix:"1. "}),[g.Quote]:w({line:!0,multiline:!0,nodes:["Blockquote"],prefix:"> "}),[g.TaskList]:w({line:!0,multiline:!0,nodes:["BulletList"],prefix:"- [ ] "}),[g.List]:w({line:!0,multiline:!0,nodes:["BulletList"],prefix:"- "})},de=([e,n],t)=>{const{editor:o}=e(),r=o.lineBlockAt(t.start),a=o.lineBlockAt(t.end);return{start:r.from,end:a.to}},Qe=([e,n],t)=>{const{editor:o}=e();let r=t.start;const a=[];for(;r<=t.end;){const l=o.lineBlockAt(r),i=Math.max(r,l.from),c=Math.min(r,l.to);a.push({start:i,end:c}),r=l.to+1}return a},Ge=([e,n],t)=>{const{editor:o}=e(),r=o.state.wordAt(t.start)?.from||t.start,a=o.state.wordAt(t.end)?.to||t.end;return{start:r,end:a}},Ke=([e,n],t)=>t||I([e,n]).pop()||{start:0,end:0},fe=([e,n],t)=>{const{editor:o}=e();return o.state.sliceDoc(t.start,t.end)},U=([e,n],t,o)=>Ze(e(),o).find(({type:a})=>t.nodes.includes(a.name)),Ze=({editor:{state:e}},n)=>{const t=[];return N.syntaxTree(e).iterate({from:n.start,to:n.end,enter:({type:o,from:r,to:a})=>{t.push({type:o,from:r,to:a})}}),t},X=([e,n],t,o)=>{const r=fe([e,n],o),a=t.prefix.length,l=t.suffix.length*-1||r.length,i=r.slice(a,l);D([e,n],i,o)},Ye=([e,n],t,o)=>{const r=de([e,n],o),a=U([e,n],t,r);if(a){const l=a.from,i=a.to;X([e,n],t,{start:l,end:i})}else{const l=t.prefix,i=t.suffix;W([e,n],{before:l,after:i,selection:r})}},Je=([e,n],t,o)=>{Qe([e,n],o).forEach(a=>{ue([e,n],t,a)})},ue=([e,n],t,o)=>{const r=de([e,n],o),a=U([e,n],t,r),l=t.prefixStates.length>0;if(a&&l)t.prefixStates.find((i,c)=>{const d=a.from,p=a.to,y=fe([e,n],{start:d,end:p}),L=y.startsWith(i);return L&&D([e,n],y.replace(new RegExp(`^${i}`),t.prefixStates[c+1]),{start:d,end:p}),L});else if(a){const i=a.from,c=a.to;X([e,n],t,{start:i,end:c})}else{const i=t.prefix,c=t.suffix;W([e,n],{before:i,after:c,selection:r})}},et=([e,n],t,o)=>{const r=U([e,n],t,o);if(r){const a=r.from,l=r.to;X([e,n],t,{start:a,end:l})}else{const{start:a,end:l}=Ge([e,n],o),i=Array.isArray(t.prefix)?t.prefix[0]:t.prefix,c=t.suffix;W([e,n],{before:i,after:c,selection:{start:a,end:l}})}},tt=([e,n],t,o)=>{const r=Xe[t],a=Ke([e,n],o);r.block?Ye([e,n],r,a):r.multiline?Je([e,n],r,a):r.line?ue([e,n],r,a):et([e,n],r,a)},nt=u.EditorView.baseTheme({".cm-line":{fontFamily:"var(--ink-internal-font-family)"},".cm-line.cm-codeblock":{backgroundColor:"var(--ink-internal-block-background-color)",fontFamily:"var(--ink-internal-code-font-family)",padding:"0 var(--ink-internal-block-padding)"},".cm-line.cm-codeblock.cm-codeblock-open":{borderRadius:"var(--ink-internal-border-radius) var(--ink-internal-border-radius) 0 0",paddingTop:"var(--ink-internal-block-padding)"},".cm-line.cm-codeblock.cm-codeblock-close":{borderRadius:"0 0 var(--ink-internal-border-radius) var(--ink-internal-border-radius)",paddingBottom:"var(--ink-internal-block-padding)"},".cm-line .cm-code":{backgroundColor:"var(--ink-internal-block-background-color)",fontFamily:"var(--ink-internal-code-font-family)",padding:"var(--ink-internal-inline-padding) 0"},".cm-line .cm-code.cm-code-open":{borderRadius:"var(--ink-internal-border-radius) 0 0 var(--ink-internal-border-radius)",paddingLeft:"var(--ink-internal-inline-padding)"},".cm-line .cm-code.cm-code-close":{borderRadius:"0 var(--ink-internal-border-radius) var(--ink-internal-border-radius) 0",paddingRight:"var(--ink-internal-inline-padding)"}}),ot=["CodeBlock","FencedCode","HTMLBlock","CommentBlock"],rt=u.Decoration.line({attributes:{class:"cm-codeblock"}}),it=u.Decoration.line({attributes:{class:"cm-codeblock-open"}}),at=u.Decoration.line({attributes:{class:"cm-codeblock-close"}}),lt=u.Decoration.mark({attributes:{class:"cm-code"}}),st=u.Decoration.mark({attributes:{class:"cm-code cm-code-open"}}),ct=u.Decoration.mark({attributes:{class:"cm-code cm-code-close"}}),dt=u.ViewPlugin.define(e=>({update:()=>ft(e)}),{decorations:e=>e.update()}),ft=e=>{const n=new b.RangeSetBuilder,t=N.syntaxTree(e.state);for(const o of e.visibleRanges)for(let r=o.from;r<o.to;){const a=e.state.doc.lineAt(r);let l;t.iterate({enter({type:i,from:c,to:d}){if(i.name!=="Document")if(ot.includes(i.name)){n.add(a.from,a.from,rt);const p=e.state.doc.lineAt(c),y=e.state.doc.lineAt(d);return p.number===a.number&&n.add(a.from,a.from,it),y.number===a.number&&n.add(a.from,a.from,at),!1}else i.name==="InlineCode"?l={from:c,to:d,innerFrom:c,innerTo:d}:i.name==="CodeMark"&&(c===l.from?(l.innerFrom=d,n.add(c,d,st)):d===l.to&&(l.innerTo=c,n.add(l.innerFrom,l.innerTo,lt),n.add(c,d,ct)))},from:a.from,to:a.to}),r=a.to+1}return n.finish()},ut=()=>[nt,dt],pt=[{key:"Tab",run:({state:e,dispatch:n})=>e.selection.ranges.some(t=>!t.empty)?T.indentMore({state:e,dispatch:n}):(n(e.update(e.replaceSelection("  "),{scrollIntoView:!0,annotations:b.Transaction.userEvent.of("input")})),!0),shift:T.indentLess}],mt=()=>u.keymap.of([...pt,...T.defaultKeymap,...T.historyKeymap]),gt=()=>u.EditorView.lineWrapping,ht=()=>{const e=u.EditorView.baseTheme({"&":{},".cm-scroller":{lineHeight:"var(--ink-internal-editor-line-height)",fontFamily:"var(--ink-internal-font-family)",fontSize:"var(--ink-internal-editor-font-size)"},".cm-line":{padding:"0"}}),n=N.syntaxHighlighting(N.HighlightStyle.define([{tag:f.tags.atom,color:"var(--ink-internal-syntax-atom-color)"},{tag:f.tags.meta,color:"var(--ink-internal-syntax-meta-color)"},{tag:f.tags.emphasis,color:"var(--ink-internal-syntax-emphasis-color)",fontStyle:"var(--ink-internal-syntax-emphasis-font-style)"},{tag:f.tags.strong,color:"var(--ink-internal-syntax-strong-color)",fontWeight:"var(--ink-internal-syntax-strong-font-weight)"},{tag:f.tags.strikethrough,color:"var(--ink-internal-syntax-strikethrough-color)",textDecoration:"var(--ink-internal-syntax-strikethrough-text-decoration)"},{tag:f.tags.comment,color:"var(--ink-internal-syntax-comment-color)",fontStyle:"var(--ink-internal-syntax-comment-font-style)"},{tag:f.tags.monospace,color:"var(--ink-internal-syntax-code-color)",fontFamily:"var(--ink-internal-syntax-code-font-family)"},{tag:f.tags.name,color:"var(--ink-internal-syntax-name-color)"},{tag:f.tags.labelName,color:"var(--ink-internal-syntax-name-label-color)"},{tag:f.tags.propertyName,color:"var(--ink-internal-syntax-name-property-color)"},{tag:f.tags.definition(f.tags.propertyName),color:"var(--ink-internal-syntax-name-property-definition-color)"},{tag:f.tags.variableName,color:"var(--ink-internal-syntax-name-variable-color)"},{tag:f.tags.definition(f.tags.variableName),color:"var(--ink-internal-syntax-name-variable-definition-color)"},{tag:f.tags.local(f.tags.variableName),color:"var(--ink-internal-syntax-name-variable-local-color)"},{tag:f.tags.special(f.tags.variableName),color:"var(--ink-internal-syntax-name-variable-special-color)"},{tag:f.tags.heading,color:"var(--ink-internal-syntax-heading-color)",fontWeight:"var(--ink-internal-syntax-heading-font-weight)"},{tag:f.tags.heading1,color:"var(--ink-internal-syntax-heading1-color)",fontSize:"var(--ink-internal-syntax-heading1-font-size)",fontWeight:"var(--ink-internal-syntax-heading1-font-weight)"},{tag:f.tags.heading2,color:"var(--ink-internal-syntax-heading2-color)",fontSize:"var(--ink-internal-syntax-heading2-font-size)",fontWeight:"var(--ink-internal-syntax-heading2-font-weight)"},{tag:f.tags.heading3,color:"var(--ink-internal-syntax-heading3-color)",fontSize:"var(--ink-internal-syntax-heading3-font-size)",fontWeight:"var(--ink-internal-syntax-heading3-font-weight)"},{tag:f.tags.heading4,color:"var(--ink-internal-syntax-heading4-color)",fontSize:"var(--ink-internal-syntax-heading4-font-size)",fontWeight:"var(--ink-internal-syntax-heading4-font-weight)"},{tag:f.tags.heading5,color:"var(--ink-internal-syntax-heading5-color)",fontSize:"var(--ink-internal-syntax-heading5-font-size)",fontWeight:"var(--ink-internal-syntax-heading5-font-weight)"},{tag:f.tags.heading6,color:"var(--ink-internal-syntax-heading6-color)",fontSize:"var(--ink-internal-syntax-heading6-font-size)",fontWeight:"var(--ink-internal-syntax-heading6-font-weight)"},{tag:f.tags.keyword,color:"var(--ink-internal-syntax-keyword-color)"},{tag:f.tags.number,color:"var(--ink-internal-syntax-number-color)"},{tag:f.tags.operator,color:"var(--ink-internal-syntax-operator-color)"},{tag:f.tags.punctuation,color:"var(--ink-internal-syntax-punctuation-color)"},{tag:f.tags.link,color:"var(--ink-internal-syntax-link-color)"},{tag:f.tags.url,color:"var(--ink-internal-syntax-url-color)"},{tag:f.tags.string,color:"var(--ink-internal-syntax-string-color)"},{tag:f.tags.special(f.tags.string),color:"var(--ink-internal-syntax-string-special-color)"},{tag:f.tags.processingInstruction,color:"var(--ink-internal-syntax-processing-instruction-color)"}]));return[e,n]},kt=e=>{if(e.length>0)return ce(e)},pe=e=>{const n=e.options.plugins.flatMap(r=>r.type===j.Completion?r.value:[]),t=e.options.plugins.flatMap(r=>r.type===j.Default?r.value:[]),o=e.options.plugins.flatMap(r=>r.type===j.Grammar?r.value:[]);return b.EditorState.create({doc:e.options.doc,selection:kt(e.options.selections),extensions:[...Oe(e),K.autocompletion({defaultKeymap:!0,icons:!1,override:n,optionClass:()=>"ink-tooltip-option"}),ut(),T.history(),mt(),gt(),Z.markdown({base:Z.markdownLanguage,codeLanguages:Le.languages,extensions:o}),ht(),...t]})},xt=([e,n])=>{const{editor:t}=e();t.destroy()},bt=([e,n])=>{const{editor:t}=e();return t.state.sliceDoc()},Q=([e,n])=>{const{editor:t}=e();t.hasFocus||t.focus()},yt=([e,n],t,o)=>tt([e,n],t,o),D=([e,n],t,o,r=!1)=>{const{editor:a}=e();let l=o?.start,i=o?.end||o?.start;if(typeof l>"u"){const d=I([e,n]).pop();l=d.start,i=d.end}const c={changes:{from:l,to:i,insert:t}};if(r){const d=l===i?l+t.length:l,p=l+t.length;Object.assign(c,{selection:{anchor:d,head:p}})}a.dispatch(a.state.update(c))},vt=([e,n],t)=>{n(V(e(),{options:{doc:t}})),e().editor.setState(pe(e()))},Ct=e=>({destroy:xt.bind(void 0,e),doc:bt.bind(void 0,e),focus:Q.bind(void 0,e),insert:D.bind(void 0,e),load:vt.bind(void 0,e),reconfigure:wt.bind(void 0,e),select:me.bind(void 0,e),selections:I.bind(void 0,e),update:St.bind(void 0,e),wrap:W.bind(void 0,e)}),wt=([e,n],t)=>{const o=le(n(V(e(),{options:t})));e().editor.dispatch({effects:o})},me=([e,n],t)=>{const{editor:o}=e();o.dispatch(o.state.update({selection:ce(t)}))},I=([e,n])=>{const{editor:t}=e();return Ue(t.state.selection)},St=([e,n],t)=>{const{editor:o}=e();o.dispatch(o.state.update({changes:{from:0,to:o.state.doc.length,insert:t}}))},W=([e,n],{after:t,before:o,selection:r})=>{const{editor:a}=e(),l=r||I([e,n]).pop()||{start:0,end:0},i=a.state.sliceDoc(l.start,l.end);D([e,n],`${o}${i}${t}`,l),me([e,n],[{start:l.start+o.length,end:l.end+o.length}])},Lt=`.ink-drop-zone{align-items:center;background-color:#00000080;color:var(--ink-internal-color);display:flex;inset:0;justify-content:center;position:var(--ink-internal-modal-position);z-index:100}.ink-drop-zone:not(.visible){display:none}.ink-drop-zone-modal{background-color:var(--ink-internal-block-background-color);border-radius:var(--ink-internal-border-radius);box-sizing:border-box;height:100%;max-height:20rem;max-width:40rem;padding:1rem;position:relative;width:100%}.ink-drop-zone-hide{cursor:pointer;height:1.75rem;position:absolute;right:.25rem;top:.25rem;width:1.75rem}.ink-drop-zone-hide svg{background-color:var(--ink-internal-block-background-color)}.ink-drop-zone-droppable-area{align-items:center;border:.2rem dashed var(--ink-internal-color);border-radius:.125rem;box-sizing:border-box;display:flex;flex-direction:column;font-size:1.25em;gap:1rem;height:100%;justify-content:center;padding:1rem;text-align:center}.ink-drop-zone-file-preview{align-items:center;display:flex;flex-wrap:wrap;gap:.5rem;max-width:25.5rem}.ink-drop-zone-file-preview-image{border:.125rem solid #222;border-radius:.125rem;box-sizing:border-box;height:6rem;object-fit:cover;padding:.5rem;width:6rem}
`,Mt=x("<style></style>"),$t=x("<span>uploading files...</span>"),Et=x('<div class="ink-drop-zone"><div class="ink-drop-zone-modal"><div class="ink-drop-zone-droppable-area"><div class="ink-drop-zone-file-preview"></div></div><div class="ink-drop-zone-hide"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div></div></div>'),_t=x('<img class="ink-drop-zone-file-preview-image">'),At=x("<span>drop files here</span>"),Dt=()=>{const[e,n]=s.createSignal(0),[t,o]=s.createSignal([]),[r,a]=s.createSignal(!1),[l,i]=s.createSignal(!1),[c,d]=z(),p=()=>{i(!1)},y=h=>{if(c().options.files.dragAndDrop){h.preventDefault(),h.stopPropagation();const v=h.dataTransfer;v?.files?ye(v.files):(n(0),i(!1),o([]))}},L=h=>{c().options.files.dragAndDrop&&(h.preventDefault(),n(e()+1),i(!0))},H=h=>{c().options.files.dragAndDrop&&(h.preventDefault(),n(e()-1),e()===0&&i(!1))},F=h=>{c().options.files.dragAndDrop&&(h.preventDefault(),i(!0))},xe=h=>{c().options.files.dragAndDrop&&(h.preventDefault(),n(0),i(!1))},be=h=>{if(c().options.files.clipboard){h.preventDefault();const v=h.clipboardData;v?.files&&v.files.length>0&&ye(v.files)}},ye=h=>{Array.from(h).forEach(v=>{o([...t(),v])}),a(!0),i(!0),Promise.resolve(c().options.files.handler(h)).then(v=>{if(c().options.files.injectMarkup&&v){const B=`![](${v})`;D([c,d],B)}}).finally(()=>{n(0),a(!1),i(!1),o([])})};return s.onMount(()=>{document.addEventListener("dragenter",L),document.addEventListener("dragleave",H),document.addEventListener("dragover",F),document.addEventListener("drop",xe),c().root.addEventListener("paste",be)}),s.onCleanup(()=>{document.removeEventListener("dragenter",L),document.removeEventListener("dragleave",H),document.removeEventListener("dragover",F),document.removeEventListener("drop",xe),c().root.removeEventListener("paste",be)}),[(()=>{const h=Mt.cloneNode(!0);return m(h,Lt),h})(),(()=>{const h=Et.cloneNode(!0),v=h.firstChild,B=v.firstChild,an=B.firstChild,ln=B.nextSibling;return B.addEventListener("drop",y),m(an,s.createComponent(s.For,{get each(){return t().slice(0,8)},children:ve=>(()=>{const G=_t.cloneNode(!0);return s.createRenderEffect(R=>{const Ce=ve.name,we=URL.createObjectURL(ve);return Ce!==R._v$&&ee(G,"alt",R._v$=Ce),we!==R._v$2&&ee(G,"src",R._v$2=we),R},{_v$:void 0,_v$2:void 0}),G})()})),m(B,s.createComponent(s.Show,{get when(){return r()},get fallback(){return At.cloneNode(!0)},get children(){return $t.cloneNode(!0)}}),null),ln.$$click=p,s.createRenderEffect(()=>h.classList.toggle("visible",!!l())),h})()]};J(["click"]);const Bt=e=>{const n=new u.EditorView({dispatch:t=>{const{options:o}=e;o.hooks.beforeUpdate(t.newDoc.toString()),n.update([t]),t.docChanged&&o.hooks.afterUpdate(t.newDoc.toString())},state:pe(e)});return n},Nt=()=>{const[e,n]=z(),t=Bt(e());return n(V(e(),{editor:t})),t.dom},Tt=x('<button class="ink-button"></button>'),C=e=>(()=>{const n=Tt.cloneNode(!0);return n.$$click=t=>e.onclick(t),m(n,()=>e.children),n})();J(["click"]);const Vt=`.ink .ink-toolbar{background-color:var(--ink-internal-block-background-color);border-radius:var(--ink-internal-border-radius);bottom:.25rem;color:inherit;display:flex;gap:2rem;overflow:auto;padding:.25rem;position:sticky;top:.25rem;z-index:10}.ink .ink-toolbar-group{display:flex}.ink .ink-toolbar .ink-button{align-items:center;background:none;border:none;border-radius:var(--ink-internal-border-radius);color:inherit;cursor:pointer;display:flex;height:2.25rem;justify-content:center;padding:.4rem;width:2.25rem}.ink .ink-toolbar .ink-button:hover{background-color:var(--ink-internal-block-background-color-on-hover)}.ink .ink-toolbar .ink-button>*{align-items:center;display:flex;height:100%}
`,jt=x('<svg viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-miterlimit="5" stroke-linecap="round" stroke-linejoin="round"><path d="M6 4V10M6 16V10M6 10H14M14 10V4M14 10V16"></path></svg>'),zt=x('<svg viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="1.5" stroke-miterlimit="5" stroke-linecap="round" stroke-linejoin="round"><path d="M6.5 10H10.5C12.1569 10 13.5 11.3431 13.5 13C13.5 14.6569 12.1569 16 10.5 16H6.5V4H9.5C11.1569 4 12.5 5.34315 12.5 7C12.5 8.65686 11.1569 10 9.5 10"></path></svg>'),Ht=x('<svg viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-miterlimit="5" stroke-linecap="round" stroke-linejoin="round"><path d="M11 4L9 16M13 4H9M7 16H11"></path></svg>'),Rt=x('<svg viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-miterlimit="5" stroke-linecap="round" stroke-linejoin="round"><path d="M2.00257 16H17.9955M2.00055 4H18M7 10H18.0659M2 8.5V11.4999C2.4 11.5 2.5 11.5 2.5 11.5V11V10.5M4 8.5V11.4999H4.5V11V10.5"></path></svg>'),Ot=x('<svg viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-miterlimit="5" stroke-linecap="round" stroke-linejoin="round"><path d="M13 4L7 16"></path><path d="M5 7L2 10L5 13"></path><path d="M15 7L18 10L15 13"></path></svg>'),It=x('<svg viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-miterlimit="5" stroke-linecap="round" stroke-linejoin="round"><path d="M7 4L8 6"></path></svg>'),Wt=x('<svg viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-miterlimit="5" stroke-linecap="round" stroke-linejoin="round"><path d="M7 16H17.8294"></path><path d="M2 16H4"></path><path d="M7 10H17.8294"></path><path d="M2 10H4"></path><path d="M7 4H17.8294"></path><path d="M2 4H4"></path></svg>'),Ft=x('<svg viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-miterlimit="5" stroke-linecap="round" stroke-linejoin="round"><path d="M7 16H18"></path><path d="M2 17.0242C2.48314 17.7569 3.94052 17.6154 3.99486 16.7919C4.05315 15.9169 3.1975 16.0044 2.99496 16.0044M2.0023 14.9758C2.48544 14.2431 3.94282 14.3846 3.99716 15.2081C4.05545 16.0831 3.1998 16.0002 2.99726 16.0002"></path><path d="M7 10H18"></path><path d="M2.00501 11.5H4M2.00193 8.97562C2.48449 8.24319 3.9401 8.38467 3.99437 9.20777C4.05259 10.0825 2.04342 10.5788 2 11.4996"></path><path d="M7 4H18"></path><path d="M2 5.5H4M2.99713 5.49952V2.5L2.215 2.93501"></path></svg>'),qt=x('<svg viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-miterlimit="5" stroke-linecap="round" stroke-linejoin="round"><path d="M7 16H17.8294"></path><path d="M5 15L3 17L2 16"></path><path d="M7 10H17.8294"></path><path d="M5 9L3 11L2 10"></path><path d="M7 4H17.8294"></path><path d="M5 3L3 5L2 4"></path></svg>'),Pt=x('<svg viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-miterlimit="5" stroke-linecap="round" stroke-linejoin="round"><path d="M9.12127 10.881C10.02 11.78 11.5237 11.7349 12.4771 10.7813L15.2546 8.00302C16.2079 7.04937 16.253 5.54521 15.3542 4.6462C14.4555 3.74719 12.9512 3.79174 11.9979 4.74539L10.3437 6.40007M10.8787 9.11903C9.97997 8.22002 8.47626 8.26509 7.52288 9.21874L4.74545 11.997C3.79208 12.9506 3.74701 14.4548 4.64577 15.3538C5.54452 16.2528 7.04876 16.2083 8.00213 15.2546L9.65633 13.5999"></path></svg>'),Ut=x('<svg viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-miterlimit="5" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="4" width="16" height="12" rx="1"></rect><path d="M7.42659 7.67597L13.7751 13.8831M2.00208 12.9778L7.42844 7.67175"></path><path d="M11.9119 12.0599L14.484 9.54443L17.9973 12.9785"></path><path d="M10.9989 7.95832C11.551 7.95832 11.9986 7.52072 11.9986 6.98092C11.9986 6.44113 11.551 6.00354 10.9989 6.00354C10.4468 6.00354 9.99921 6.44113 9.99921 6.98092C9.99921 7.52072 10.4468 7.95832 10.9989 7.95832Z"></path></svg>'),Xt=x('<svg viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-miterlimit="5" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13V4M10 4L13 7M10 4L7 7"></path><path d="M2 13V15C2 15.5523 2.44772 16 3 16H17C17.5523 16 18 15.5523 18 15V13"></path></svg>'),Qt=x('<div class="ink-toolbar"><style></style><div class="ink-toolbar-group"></div><div class="ink-toolbar-group"></div><div class="ink-toolbar-group"></div><div class="ink-toolbar-group"></div></div>'),Gt=()=>{const[e,n]=z(),t=a=>{yt([e,n],a),Q([e,n])},o=document.createElement("input"),r=()=>{o.click()};return o.style.display="none",o.type="file",o.onchange=a=>{const l=a.target;l?.files&&Promise.resolve(e().options.files.handler(l.files)).then(i=>{const c=`![](${i})`;D([e,n],c),Q([e,n])})},(()=>{const a=Qt.cloneNode(!0),l=a.firstChild,i=l.nextSibling,c=i.nextSibling,d=c.nextSibling,p=d.nextSibling;return m(l,Vt),m(i,s.createComponent(s.Show,{get when(){return e().options.toolbar.heading},get children(){return s.createComponent(C,{onclick:()=>t(g.Heading),get children(){return jt.cloneNode(!0)}})}}),null),m(i,s.createComponent(s.Show,{get when(){return e().options.toolbar.bold},get children(){return s.createComponent(C,{onclick:()=>t(g.Bold),get children(){return zt.cloneNode(!0)}})}}),null),m(i,s.createComponent(s.Show,{get when(){return e().options.toolbar.italic},get children(){return s.createComponent(C,{onclick:()=>t(g.Italic),get children(){return Ht.cloneNode(!0)}})}}),null),m(c,s.createComponent(s.Show,{get when(){return e().options.toolbar.quote},get children(){return s.createComponent(C,{onclick:()=>t(g.Quote),get children(){return Rt.cloneNode(!0)}})}}),null),m(c,s.createComponent(s.Show,{get when(){return e().options.toolbar.codeBlock},get children(){return s.createComponent(C,{onclick:()=>t(g.CodeBlock),get children(){return Ot.cloneNode(!0)}})}}),null),m(c,s.createComponent(s.Show,{get when(){return e().options.toolbar.code},get children(){return s.createComponent(C,{onclick:()=>t(g.Code),get children(){return It.cloneNode(!0)}})}}),null),m(d,s.createComponent(s.Show,{get when(){return e().options.toolbar.list},get children(){return s.createComponent(C,{onclick:()=>t(g.List),get children(){return Wt.cloneNode(!0)}})}}),null),m(d,s.createComponent(s.Show,{get when(){return e().options.toolbar.orderedList},get children(){return s.createComponent(C,{onclick:()=>t(g.OrderedList),get children(){return Ft.cloneNode(!0)}})}}),null),m(d,s.createComponent(s.Show,{get when(){return e().options.toolbar.taskList},get children(){return s.createComponent(C,{onclick:()=>t(g.TaskList),get children(){return qt.cloneNode(!0)}})}}),null),m(p,s.createComponent(s.Show,{get when(){return e().options.toolbar.link},get children(){return s.createComponent(C,{onclick:()=>t(g.Link),get children(){return Pt.cloneNode(!0)}})}}),null),m(p,s.createComponent(s.Show,{get when(){return e().options.toolbar.image},get children(){return s.createComponent(C,{onclick:()=>t(g.Image),get children(){return Ut.cloneNode(!0)}})}}),null),m(p,s.createComponent(s.Show,{get when(){return e().options.toolbar.upload},get children(){return s.createComponent(C,{onclick:r,get children(){return[Xt.cloneNode(!0),o]}})}}),null),a})()},Kt=`.ink{color:var(--ink-internal-color, inherit);display:flex;flex-direction:var(--ink-internal-flex-direction, column);gap:1rem;padding:var(--ink-internal-editor-padding, 0)}.ink .cm-tooltip{background-color:var(--ink-internal-block-background-color);border-radius:var(--ink-internal-border-radius);font-family:inherit;padding:.25rem}.ink .cm-tooltip.cm-tooltip-autocomplete ul{font-family:inherit}.ink .cm-tooltip.cm-tooltip-autocomplete ul li.ink-tooltip-option{border-radius:var(--ink-internal-border-radius);padding:.25rem}.ink .cm-tooltip.cm-tooltip-autocomplete ul li.ink-tooltip-option[aria-selected]{background-color:#96969640}.ink .cm-completionLabel{font-family:inherit}
`,Zt=x("<style></style>"),Yt=()=>{const[e]=z(),[n,t]=s.createSignal(P(e()));return s.createEffect(()=>{t(P(e()))}),s.onMount(()=>{const o=window.matchMedia("(prefers-color-scheme: dark)"),r=a=>{const{editor:l,root:i}=e();if(i.isConnected){const c=le(e());l.dispatch({effects:c}),t(P(e()))}else o.removeEventListener("change",r)};o.addEventListener("change",r)}),(()=>{const o=Zt.cloneNode(!0);return m(o,()=>`.ink {
  ${n().join(`
  `)}
}`,null),m(o,Kt,null),o})()},Jt=x('<div class="ink"></div>'),en=()=>{const[e,n]=z(),t=o=>{n(V(e(),{root:o}))};return(()=>{const o=Jt.cloneNode(!0);return t(o),m(o,s.createComponent(Yt,{}),null),m(o,s.createComponent(Dt,{}),null),m(o,s.createComponent(s.Show,{get when(){return e().options.interface.toolbar},get children(){return s.createComponent(Gt,{})}}),null),m(o,s.createComponent(Nt,{}),null),o})()},ge=se(),he=s.createContext([()=>ge,e=>typeof e=="function"?e(ge):e]),tn=e=>s.createComponent(he.Provider,{get value(){return e.store},get children(){return e.children}}),z=()=>s.useContext(he),nn=e=>s.createComponent(tn,{get store(){return e.store},get children(){return s.createComponent(en,{get store(){return e.store}})}}),on=({theme:e,decorator:n})=>{const t=u.EditorView.baseTheme(e),o=l=>u.Decoration.widget({widget:l,side:-1,block:!0}),r=l=>{const c=n(l).map(d=>o(d.widget).range(d.from,d.to));return c.length>0?b.RangeSet.of(c):u.Decoration.none},a=b.StateField.define({create(l){return r(l)},update(l,i){return i.docChanged?r(i.state):l.map(i.changes)},provide(l){return u.EditorView.decorations.from(l)}});return[t,a]},rn=e=>e,ke=(e,n={})=>{const t=Pe(n);return $e(()=>s.createComponent(nn,{store:t}),e),Ct(t)};k.Appearance=$,k.Extensions=S,k.Markup=g,k.PluginType=j,k.default=ke,k.defineOptions=rn,k.extension=on,k.ink=ke,Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
